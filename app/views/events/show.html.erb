<div class="jumbotron">
  <h1 class="display-3"><%= @event.name %></h1>
  <div id="map"></div>
  <div id="map_form"> Enter Postal Code To See Map Location:
    <%= form_tag events_location_path, method: :post, remote: true do %>
    <div id="form-box">
      <%= label_tag :postal_code %>
      <%= text_field_tag :postal_code, params[:postal_code], id: "postal-code-input" %>
    </div>
    <div id="form-submit">
      <%= submit_tag %>
    </div>
    <% end %>
  </div>
  <% if @event.date %>
  <p class="lead"><strong>When:</strong> <%= @event.pretty_date %> @ <%= @event.pretty_time %></p>
  <% end %>
  <% if @event.artist %>
  <p class="lead"><strong>Who's Palying:</strong> <%= link_to @event.artist.name, artist_path(@event.artist) %></p>
  <% end %>
  <% if @event.images.any? %>
    <img src="<%= @event.images.four_by_three.first.url %>" alt="<%=@event.name %>">
  <% end %>

  <hr class="my-4">
  <% if @event.venue %>
    <p><strong>Where:</strong> <%= link_to @event.venue.name, venue_path(@event.venue) %></p>
    <p><%=@event.venue.address_1%> <%= @event.venue.address_2 ? @event.venue.address_2 : "" %></p>
    <p><%= @event.venue.city %>, <%= @event.venue.province%> <%= @event.venue.postal_code%></p>
    <% if @event.venue.phone_number %>
      <p><strong>Contact Info:</strong><%= @event.venue.phone_number%></p>
      <%end%>
    <%end%>
  <p class="lead">
    <p><%= link_to "View all events", events_path %>
      <% if @event.genres.any? %>
       | <%= link_to "#{@event.genres.first.name} Events", genre_path(@event.genres.first.id) %>
    <% end %>
    <% if @event.user == current_user %>
      | <%= link_to "Edit this event", edit_event_path(@event) %></p>
    <% end %>
  </p>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=<%=ENV["MAPS_KEY"]%>&callback=eventShowMap" async defer></script>
